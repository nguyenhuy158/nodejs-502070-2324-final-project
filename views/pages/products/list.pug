extends ..\layout.pug

block content

    .row
        .col
        .col-2.form-floating
            select#floatingSelect.form-select(onchange='updatePerPage(this)')
                option(selected='' value='10') 10
                option(value='20') 20
                option(value='30') 30
                option(value='40') 40
                option(value='50') 50
            label(for='floatingSelect') Product per page


    div.container
        h2 Product List
        table.table
            thead
                tr
                    th STT
                    th Barcode
                    th Product Name
                    th Import Price
                    th Retail Price
                    th Category
                    th Creation Date
                    th Last Update Date
            tbody
            if products
                each product, index in products
                    tr
                        td= index
                        td= product.barcode
                        td= product.productName
                        td= product.importPrice
                        td= product.retailPrice
                        td= product.category
                        td= product.creationDate
                        td= product.lastUpdateDate


    // Display the message
    p Display #{Math.min((current - 1) * perPage + 1, count)} to #{Math.min(current * perPage, count)} of #{count} data

    // Pagination
    include ../../partials/pagination

    script.
        function updatePerPage(select) {
            const selectedValue = select.value;
            // Update the URL with the selected product per page value
            window.location.href = `/products?page=#{current}&perPage=${selectedValue}`;
        }


